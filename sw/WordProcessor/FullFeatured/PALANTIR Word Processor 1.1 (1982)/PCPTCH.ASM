;PATCH FOR PALANTIR TO GET MORE EFFICIENT CONSOLE I/L
; FOR VT100
	ORG	0C82H
;COLUMN IS IN H, ROW IN L (1-80, 1-24)
; POSITION CURSOR ESC [ R ; C H
; R, C IN ASCII DECIMAL
	PUSH	H
	MOV	A,L	;ROW
	ADD	A	;X2
	MOV	L,A
	MVI	H,0
	LXI	B,TABLE
	DAD	B
	MVI	C,27	;ESCAPE LEAD IN
	CALL	OUTC	;SEND ESC
	JMP	X33
;
TABLE:	DB	'0001020304050607080910'
	DB	'11121314151617181920'
	DB	'21222324252627282930'
	DB	'31323334353637383940'
	DB	'41424344454647484950'
	DB	'51525354555657585960'
	DB	'61626364656667686970'
	DB	'71727374757677787980'
	ORG	0D36H
X33:	MVI	C,'['
	CALL	OUTC	;SEND [
	CALL	SEN2	;SEN COORDINATE
	MVI	C,';'	;SEPARATOR
	CALL	OUTC
	POP	H
	MOV	A,H	;COLUMN
	ADD	A	;X2
	MOV	L,A
	CALL	SEN1
	MVI	C,'H'	;TERMINATOR
	CALL	OUTC
	RET
;
	ORG	0E8AH
	MOV	C,A	;CHAR TO C
	JMP	OUTC	;OUTPUT IT
OUTC:	PUSH	H
	LHLD	1
	LXI	D,9
	DAD	D
	CALL	OUTC1
	POP	H
	RET
OUTC1:	PCHL
SEN1:	MVI	H,0
	LXI	B,TABLE
	DAD	B
SEN2:	MOV	C,M	;FIRST BYTE
	CALL	OUTC	;SEND IT
	INX	H
	MOV	C,M	;SECOND BYTE
	JMP	OUTC
;




PCHL

	RET
OUTC1:	PCHL


	RET
OUTC1:	PCHL


 445-3591
Riverside, CA.       (714) 781-3767
Moreno Vly