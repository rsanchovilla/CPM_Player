###    1/1/82              *** алпха нумериц сорт ***                 This macro will sort a customer list or other filein ascending order numerically or alphabetically.  Itis assumed that you have a properly formatted file ondisk.  The results will be left in a named disk file.   The file CUSLIST.DEM is formatted correctly to operatecorrectly with the options as currently set.##A       "10       "     "How many lines in each record           "B       "2        "     "On which line do you wish to sort       "C       "4        "     "Field Description                       "        ""              "          0 = Literal    1 = 1st Word   "        ""              "          2 = 2nd Word   3 = Last Word  "        ""              "          4 = Name (First Last)         "D       "         "     "    Minimum Target                      "E       "ZZZZZZZZZ"     "    Maximum Target                      "H       "15       "     "How many characters for key field       "I       "1        "     "Validation check  (0=no, 1=yes)         "#:ON -1 101T/F%4/H0/H10000 ;PUT LIST IN HOLD:%5 = 0:pr "#1/BEGIN SORT":%9 = %4+1      ;FOR INITIAL D;:on -1 75:%9 = %9-1      ;d for this pass:%3 = 0         ;start next passt;:%A = !f%9             ;next comparison:ON ?-3 / 30 /:%B = !:ON %A%B 20 / /B%9/F1          ;PLACE CURSOR ON NEXT LOC:ON -1 12;B0/S/%B/%A/     ;INTERCHANGEB%9/S/%A/%B/F1;;:%3 = %3+1:ON -1 12;;;:%5 = %5+1:pr "#0/pass  %5,%3  ":ON %3 9 7 9;;;;;;;;       now strip away the fieldsts/</:%7 = 0:%6 = $2:%C = "?????????????????????????????????????":sf %C %6-4Ts/%C//f1:%7 = %7+1:on %7-%4 48 / 48T/U/H0;WO/%E/:%5 = 0e/b1:%6 = !-1       ;get the next record number:on %6 70 / /b0/d1t%1f%6:%5 = %5+1:PR "#0/#6/WRITING RECORD %5"W%1:on -1 56;;;;WD/T/D5000/H0:PR "#1/#13/SORT DONE.  RESULTS ARE IN %E":IN:on -1 400;;       find the d for next pass;:%6 = %9:%9 = 512:on %6-%9 / / 8:%9 = 256:on %6-%9 / / 8:%9 = 128:on %6-%9 / / 8:%9 = 64:on %6-%9 / / 8:%9 = 32:on %6-%9 / / 8:%9 = 16:on %6-%9 / / 8:%9 = 8:on %6-%9 / / 8:%9 = 4:on %6-%9 / / 8:%9 = 2:on %6-%9 / / 8:%9 = 1:on %6-%9 / / 8:on -1 40;;:ss 32:%1 = $A;   LINES PER RECORD:%3 = $B;   SORT LINE:%4 = $C;   TARGET DEFINITION:%F = $D;   MINIMUM TARGET:%G = $E;   MAXIMUM TARGET:%2 = $H;  CHARACTERS IN KEY FIELD:%8 = $I;  VALIDATION CHECK:pr "#1/":in "#0/#13/#3/#3/Filename of unsorted file:       " %Dro/%D/:on $0  /+2 / /+2:PR "#1/#13/There is no file by name of %D - TRY AGAIN...   ":ON -1 /-5:in "#0/#13/#3/#3/#3/Filename of sorted file:         " %E;:pr "#1/#13/Processing the unsorted file ...";       come here for another disk pass;;e:%5=0;r%1:%9 = $0:on %9 128 / 128 ;end of file reached:on ?-3 260 155 260:%5 = %5+1:on %8-1 143 / 143:on ?-46 / 143 /        ;pass with MARK:on ?-65 / 143 /        ;or que lineS//╙/B0/S/</:CPB0/S/╙//:PR "╙ еррор рецорд %5. CONTINUE?(Y/N)":in %C:%B = "Y":on %B%C / 143 /:%B = "N":on %B%C 133 / 133rd:on -1 1000;prepare this record:%9 = %3-1      ;calculate number to deleted %9f1              ;skip the item for sort:%9 = %1-%3d %9;;;;:ON -1 124;;       first strip any miscellaneous;:on %4-0 / 180 /:on %4-4 / 160 /t/sa/,/ /t/sa/   / /t/sa/  / /t/sa/ </<t/sa/< /</:on %4-4 180 / 180t/sa/ I</</t/sa/ II</</t/sa/ III</</t/sa/*Jr.//t/sa/*Sr.//t1000s/,/</d1;;;;;;;;;      ;now mark the data lines:%7=0t;:on ?-3 / 225 /:%C = "":%7 = %7+1:on %4-2 209 / 192      ;if last, reverse:%C = !:%C = !:on -1 205;:%C = !                 ;loop and get last;:on ?-13 / 205 /;terminate on return;;;;;;;:ON -1 192;;:%A = %C:on -1 210;;:%A = !:on %A%F 212 / /        ;CHECK IF IN RANGE:on %A%G 214 214 /b0/d1:on -1 184B0/s//"/B0:%B = !:on %4-2 219 / /;:%B = "%C %B":SF %B %2:se %Bb0/s//"%B %7</d1:on -1 184;;E:%7 = $3-1:pr "#1/There will be %7 records in the file created":pr "#13/procedure will take about 15m for 200 RECORDS";;;       strip the unused records;E:%4 = $3-1      ;total number of lines:%8 = 0:%7 = 0RO/%D/;;:on %8-%4 / 266 266T/f%8           ;get the next record:%8 = %8+1s/????</:%6 = !         ;read itb0/s/????</%8</ ;put in the sorted record number;;;;:%9 = $0        ;be sure the read is open:on %9 / 260 /  ;error exit:%7 = %7+1      ;update the read recordr%1             ;read a record:ON ?-3 / 263 / :on %7-%6 /240 /d%1:on -1 250;;:in "#1/Length error in last record. Hit return to exit"rd:on -1 280:IN "#1/Sort file will not fit in memory. Hit return to exit"RD:on -1 280rd:on -1 2