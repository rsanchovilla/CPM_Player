CC1:
fgets::
LXI H,6
DAD SP
CALL CCGINT##
PUSH H
LXI H,6
DAD SP
CALL CCGINT##
PUSH H
LXI H,6
DAD SP
CALL CCGINT##
PUSH H
LXI H,1
PUSH H
CALL Ugets
XCHG;;
LXI H,8
DAD SP
SPHL
XCHG;;
RET
gets::
POP B
POP H
PUSH H
PUSH B
PUSH H
LXI H,32767
PUSH H
LXI H,0
PUSH H
LXI H,0
PUSH H
CALL Ugets
XCHG;;
LXI H,8
DAD SP
SPHL
XCHG;;
RET
Ugets::
PUSH B
PUSH B
LXI H,0
DAD SP
XCHG;;
LXI H,12
DAD SP
CALL CCGINT##
CALL CCPINT##
CC5:
LXI H,10
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
DCX H
CALL CCPINT##
XRA A
ORA H
JM CC6
ORA L
JZ CC6
POP H
PUSH H
PUSH H
LXI H,10
DAD SP
CALL CCGINT##
PUSH H
CALL fgetc
POP B
POP D
MOV A,L
STAX D
JMP CC9
CC10:
POP D
PUSH D
LXI H,0
MOV A,L
STAX D
POP D
PUSH D
LXI H,12
DAD SP
CALL CCGINT##
CALL CCEQ##
MOV A,H
ORA L
JZ CC11
LXI H,0
POP B
POP B
RET
CC11:
LXI H,12
DAD SP
CALL CCGINT##
POP B
POP B
RET
CC12:
POP D
PUSH D
LXI H,6
DAD SP
CALL CCGINT##
DAD D
XCHG;;
LXI H,0
MOV A,L
STAX D
LXI H,12
DAD SP
CALL CCGINT##
POP B
POP B
RET
CC13:
POP D
PUSH D
LXI H,12
DAD SP
CALL CCGINT##
CALL CCUGT##
MOV A,H
ORA L
JZ CC14
LXI H,2
DAD SP
XCHG;;
LXI H,1
CALL CCPINT##
JMP CC15
CC14:
LXI H,2
DAD SP
XCHG;;
LXI H,0
CALL CCPINT##
CC15:
JMP CC16
CC17:
LXI H,2
DAD SP
PUSH H
POP B
POP D
PUSH D
PUSH B
LXI H,14
DAD SP
CALL CCGINT##
CALL CCSUB##
POP D
CALL CCPINT##
CC16:
LXI H,8
DAD SP
CALL CCGINT##
PUSH H
CALL iscons
POP B
MOV A,H
ORA L
JZ CC18
LXI H,CC4+0
PUSH H
LXI H,2
PUSH H
CALL fputs
POP B
POP B
LXI H,10
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
INX H
CALL CCPINT##
CC19:
LXI H,2
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
DCX H
CALL CCPINT##
INX H
MOV A,H
ORA L
JZ CC20
LXI H,CC4+7
PUSH H
LXI H,2
PUSH H
CALL fputs
POP B
POP B
LXI H,0
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
DCX H
CALL CCPINT##
CALL CCGCHAR##
XCHG;;
LXI H,32
CALL CCLT##
MOV A,H
ORA L
JZ CC21
LXI H,CC4+11
PUSH H
LXI H,2
PUSH H
CALL fputs
POP B
POP B
CC21:
LXI H,10
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
INX H
CALL CCPINT##
JMP CC19
CC20:
JMP CC5
CC18:
CC22:
LXI H,0
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
INX H
CALL CCPINT##
JMP CC8
CC9:
CALL CCSWITCH##
DW CC10,-1
DW CC12,10
DW CC13,8
DW CC17,24
DW 0
JMP CC22
CC8:
JMP CC5
CC6:
POP D
PUSH D
LXI H,0
MOV A,L
STAX D
LXI H,12
DAD SP
CALL CCGINT##
POP B
POP B
RET
CC4:DB 8,32,8,8,32,8,0,8,32,8
DB 0,8,32,8,0
EXT iscons
EXT fgetc
EXT fputs
END
