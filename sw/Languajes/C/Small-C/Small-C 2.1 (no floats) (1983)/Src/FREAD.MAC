EXT Ustatus
CC1:
fread::
POP B
POP H
PUSH H
PUSH B
PUSH H
LXI H,10
DAD SP
CALL CCGINT##
PUSH H
LXI H,8
DAD SP
CALL CCGINT##
XCHG;;
LXI H,10
DAD SP
CALL CCGINT##
CALL CCMULT##
PUSH H
CALL read
POP B
POP B
POP B
XCHG;;
LXI H,6
DAD SP
CALL CCGINT##
CALL CCDIV##
RET
read::
PUSH B
LXI H,0
DAD SP
XCHG;;
LXI H,0
CALL CCPINT##
CC4:
LXI H,4
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
DCX H
CALL CCPINT##
INX H
MOV A,H
ORA L
JZ CC5
LXI H,6
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
INX H
CALL CCPINT##
DCX H
PUSH H
LXI H,10
DAD SP
CALL CCGINT##
PUSH H
CALL Uread
POP B
POP D
MOV A,L
STAX D
LXI H,Ustatus
XCHG;;
LXI H,08
DAD SP
CALL CCGINT##
DAD H
DAD D
CALL CCGINT##
XCHG;;
LXI H,12
CALL CCAND##
MOV A,H
ORA L
JZ CC6
JMP CC5
CC6:
LXI H,0
DAD SP
MOV D,H
MOV E,L
CALL CCGINT##
INX H
CALL CCPINT##
JMP CC4
CC5:
POP H
PUSH H
POP B
RET
EXT Uread
END
