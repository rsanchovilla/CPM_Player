%MG ;John Lewkowicz
 R !!,"Global name: ^",G Q:G=""  I "??"[G W !!,"Global name (sans ""^"") - use ""2GBL"" to display 2 levels of GBL",! G %MG
 S N=99 S:G?1N.E N=$E(G,1),G=$E(G,2,99) S G="^"_G,S1="" I '$D(@G) W " ??" G %MG
 I $D(@G)#2 W !,G,?15,@G
S1 S S1=$O(@(G_"(S1)")),S2="" G %MG:S1="" W:$D(^(S1))#2 !,G_"("_S1_")",?15," ",^(S1) G S1:N=1,S1:'($D(^(S1))\10#2)
S2 S S2=$O(@(G_"(S1,S2)")),S3="" G S1:S2="" W:$D(^(S2))#2 !,G_"("_S1_","_S2_")",?15," ",^(S2) G S2:N=2,S2:'($D(^(S2))\10#2)
S3 S S3=$O(@(G_"(S1,S2,S3)")),S4="" G S2:S3="" W:$D(^(S3))#2 !,G_"("_S1_","_S2_","_S3_")",?15," ",^(S3) G S3:N=3,S3:'($D(^(S3))\10#2)
S4 S S4=$O(@(G_"(S1,S2,S3,S4)")),S5="" G S3:S4="" W:$D(^(S4))#2 !,G_"("_S1_","_S2_","_S3_","_S4_")",?15," ",^(S4) G S4:N=4,S4:'($D(^(S4))\10#2)
 G S4
,S4)")),S5="" G S3:S4="" W:$D(^(S4))#2 !,G_"("_S1_","_S2_","_S3_","_S4_")",?15," ",^(S4) G S4:N=4,S4:'($D(^(S4))\1