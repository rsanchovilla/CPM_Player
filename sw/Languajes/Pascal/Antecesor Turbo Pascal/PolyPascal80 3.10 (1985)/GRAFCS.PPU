TYPE STRING255=STRING[255];
VAR  BUFFER:ARRAY[1..432] OF BYTE;
     VIDEO:STRING[6];

PROCEDURE GRAF_OFF(CH:BYTE);
BEGIN CODE
  $3A,CH,$F7,$03,$DB,$B2,$08,$AF,$3D,$D3,$B2,$2A,
  $F4,$BF,$11,$10,$00,$19,$EB,$21,BUFFER,$01,$B0,$01,
  $ED,$B0,$08,$D3,$B2
END;

PROCEDURE GRAF_ON(CH:BYTE;MODE,COLOR,X_SIZE,Y_SIZE:INTEGER);
BEGIN
  VIDEO:='VIDEO:';
  CODE $DB,$B2,$08,$AF,$3D,$D3,$B2,$2A,$F4,$BF,$11,$10,$00,
       $19,$11,BUFFER,$01,$B0,$01,$ED,$B0,$08,$D3,$B2,$3A,
       MODE,$57,$06,$01,$0E,$16,$F7,$10,$3A,COLOR,$57,
       $06,$01,$0E,$17,$F7,$10,$3A,X_SIZE,$57,$06,$01,$0E,
       $18,$F7,$10,$3A,Y_SIZE,$57,$06,$01,$0E,$19,$F7,$10,
       $3A,CH,$F5,$F7,$03,$F1,$11,VIDEO,$F7,$01
END;

PROCEDURE DISPLAY(CH:BYTE;SAT,SFROM,STO:INTEGER);
BEGIN CODE
  $21,CH,$7E,$21,SAT,$5E,$21,SFROM,$4E,$21,STO,
  $56,$06,$01,$F7,$0B
END;

PROCEDURE PRINT(CH:BYTE;SZOVEG:STRING255);
BEGIN CODE
  $3A,CH,$21,SZOVEG,$4E,$06,$00,$23,$EB,$F7,$08
END;

PROCEDURE GOXY(CH:BYTE;X,Y:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'='+CHR(X+32)+CHR(Y+32))
END;

PROCEDURE CLEAR(CH:BYTE);
BEGIN
  PRINT(CH,CHR(26))
END;

PROCEDURE PLOT(CH:BYTE;X,Y:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'A'+CHR(LO(X))+CHR(HI(X))+CHR(LO(Y))+CHR(HI(Y)))
END;

PROCEDURE PLOTREL(CH:BYTE;X,Y:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'R'+CHR(LO(X))+CHR(HI(X))+CHR(LO(Y))+CHR(HI(Y)))
END;

PROCEDURE BEAM(CH:BYTE;ON_OFF:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+CHR(ORD('s')-(ON_OFF*32)))
END;

PROCEDURE MOVETO(CH:BYTE;X,Y:INTEGER);
BEGIN
  BEAM(CH,0);PLOT(CH,X,Y)
END;

PROCEDURE MOVEREL(CH:BYTE;X,Y:INTEGER);
BEGIN
  BEAM(CH,0);PLOTREL(CH,X,Y)
END;

PROCEDURE DRAW(CH:BYTE;X1,Y1,X2,Y2:INTEGER);
BEGIN
  MOVETO(CH,X1,Y1);
  BEAM(CH,1);PLOT(CH,X2,Y2)
END;

PROCEDURE BOX(CH:BYTE;X1,Y1,X2,Y2:INTEGER);
BEGIN
  MOVETO(CH,X1,Y1);
  BEAM(CH,1);PLOT(CH,X2,Y1);PLOT(CH,X2,Y2);PLOT(CH,X1,Y2);PLOT(CH,X1,Y1)
END;

PROCEDURE ELLIPSE(CH:BYTE;X,Y:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'E'+CHR(LO(X))+CHR(HI(X))+CHR(LO(Y))+CHR(HI(Y)))
END;

PROCEDURE PALETTE(CH:BYTE;C0,C1,C2,C3,C4,C5,C6,C7:INTEGER);
BEGIN
PRINT(CH,CHR(27)+'C'+CHR(C0)+CHR(C1)+CHR(C2)+CHR(C3)+CHR(C4)+CHR(C5)+CHR(C6)+CHR(C7))
END;

PROCEDURE INK(CH:BYTE;COLOR:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'I'+CHR(COLOR))
END;

PROCEDURE PAPER(CH:BYTE;COLOR:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'P'+CHR(COLOR))
END;

PROCEDURE LINESTYLE(CH:BYTE;MODE:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'.'+CHR(MODE))
END;

PROCEDURE LINEMODE(CH:BYTE;MODE:INTEGER);
BEGIN
  PRINT(CH,CHR(27)+'M'+CHR(MODE))
END;

PROCEDURE FILL(CH:BYTE);
BEGIN
  PRINT(CH,CHR(27)+'F')
END;